@model RepositorioClases.Events

@{
    ViewBag.Title = "Details";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<br />

<div class="card #00897b teal darken-1 hoverable">
    @if (Model.RutaImagen != null)
    {
        <div class="card-image">
            <img src="@Html.DisplayFor(modelItem => Model.RutaImagen)">
        </div>
    }
    <div class="card-content white-text">

        <div class="col s12 m12 right-align">
            <span class="card-info card-event-detail-info"><i class="@Html.getIcon(@Html.DisplayFor(modelItem => Model.IdCategoria).ToString())"></i> @Html.DisplayFor(modelItem => Model.IdCategoria) </span>
        </div>

        <span class="card-title text-darken-4">@Html.DisplayFor(modelItem => Model.NombreEvento)</span>
        <p class="card-subtitle text-darken-2">@Html.DisplayFor(modelItem => Model.Descripcion)</p>
        <p class="card-text"><small class="text-muted">Creado por @Html.getNameUser(id: @Html.DisplayFor(modelItem => Model.IdUser).ToString())</small></p>
        <hr />

        <!-- IdUser -->

        <div class="row card-row">
            <div class="col s12 m6">
                <span class="card-info card-event-detail-info"><i class="fa fa-calendar-times-o"></i> @Html.DisplayFor(modelItem => Model.FechaInicio) - @Html.DisplayFor(modelItem => Model.FechaFin)</span>
            </div>
            <div class="col s12 m6">
                <span class="card-info card-event-detail-info"><i class="fa fa-clock-o"></i> @Html.DisplayFor(modelItem => Model.HoraInicio) - @Html.DisplayFor(modelItem => Model.HoraFin)</span>
            </div>
        </div>

        <div class="row card-row">
            <div class="col s12 m6">
                <span class="card-info card-event-detail-info"><i class="fa fa-address-card-o"></i> @Html.DisplayFor(modelItem => Model.Direccion)</span>
            </div>
            <!--<div class="col s12 m6">
                <span class="card-info card-event-detail-info">12.00 €</span>
            </div>-->
        </div>
        <hr />

        <div id = "map" style="width:100%;height:300px;"></div>
        <hr />

    </div>
</div>



@* ------------------------------------------------------------------------------------------------------------ *@




<script>
            // Note: This example requires that you consent to location sharing when
            // prompted by your browser. If you see the error "The Geolocation service
            // failed.", it means you probably did not give permission for the browser to
            // locate you.

            function initMap() {

                var map = new google.maps.Map(document.getElementById('map'), {
                    center: { lat:@Model.lat, lng: @Model.lng },
                    zoom: 15
                });

                var infoWindow = new google.maps.InfoWindow({ map: map });


                var myMarker = new google.maps.Marker({
                    position: new google.maps.LatLng(@Model.lat, @Model.lng),
                    draggable: false
                });


                map.setCenter(myMarker.position);
                myMarker.setMap(map);

                //--------------------------------------------------------------------
                google.maps.event.addListener(myMarker, 'dragend', function (evt) {
                    $('#lat').val(evt.latLng.lat().toFixed(3));
                    $('#lng').val(evt.latLng.lng().toFixed(3));
                });

                google.maps.event.addListener(myMarker, 'dragstart', function (evt) {
                    document.getElementById('lat').innerHTML = 'Currently dragging marker...';
                });

                //-----------------------------------------------------------------------
            }

</script>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBPHbsGCp8vpDA1vMKAFWsU0Odc8Mz5SAA&callback=initMap" async defer></script>


@* ------------------------------------------------------------------------------------------------------------------------------------------------------ *@


